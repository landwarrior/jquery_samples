<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="dns-prefetch" href="//fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.2.min.js" integrity="sha256-2krYZKh//PcchRtd+H+VyyQoZ/e3EcrkxhM8ycwASPA=" crossorigin="anonymous"></script>
  <style>
    html,
    body {
      background-color: #f0f0f0;
      color: #636b6f;
      font-family: 'Nunito', 'Noto Sans JP', sans-serif;
      letter-spacing: .1rem;
    }

    main {
      width: 1200px;
      margin: 0 auto;
    }

  </style>
  <script>
    $(function () {
      $.get('https://www.yahoo.co.jp')
      .done(function (data) {
        $('#result').text(data);
      })
      .fail(function () {
        $('#result').text('エラー発生');
      });
    });
    document.addEventListener('DOMContentLoaded', () => {
      fetch('https://www.yahoo.co.jp')
      .then((data) => {
        document.getElementById('result2').innerText = data;
      })
      .catch((err) => {
        document.getElementById('result2').innerText = err;
      });
      fetch('https://www.yahoo.co.jp', {mode: 'no-cors'})
      .then((data) => {
        return data.text();
      })
      .then((data) => {
        document.getElementById('result3').innerText = data;
      })
      .catch((err) => {
        document.getElementById('result3').innerText = err;
      });
    });
  </script>
</head>

<body>
  <main>
    <h1>Hello, World!</h1>
    <p>CORSの制約により、他サイトの情報は取得できない</p>
    <div>yahooのトップページをAjax通信で取得しようとすると</div>
    <div id="result"></div>
    <br>
    <div>fetch APIでもダメ</div>
    <div id="result2"></div>
    <div>なんとかしようとしてもダメ（レスポンスが空）</div>
    <div id="result3"></div>
  </main>
</body>

</html>
